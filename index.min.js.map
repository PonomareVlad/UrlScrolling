{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index.min.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isScrolledIntoView = isScrolledIntoView;\nexports.debounce = debounce;\nexports.default = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar UrlScroll =\n/*#__PURE__*/\nfunction () {\n  function UrlScroll() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$scrollNode = _ref.scrollNode,\n        scrollNode = _ref$scrollNode === void 0 ? document : _ref$scrollNode,\n        _ref$pathAttribute = _ref.pathAttribute,\n        pathAttribute = _ref$pathAttribute === void 0 ? 'id' : _ref$pathAttribute,\n        _ref$headerSection = _ref.headerSection,\n        headerSection = _ref$headerSection === void 0 ? true : _ref$headerSection,\n        _ref$scrollEventDelay = _ref.scrollEventDelay,\n        scrollEventDelay = _ref$scrollEventDelay === void 0 ? 20 : _ref$scrollEventDelay,\n        _ref$debug = _ref.debug,\n        debug = _ref$debug === void 0 ? false : _ref$debug;\n\n    _classCallCheck(this, UrlScroll);\n\n    // Установка параметров плагина\n    this.options = {\n      scrollNode: scrollNode instanceof Node ? scrollNode : document.querySelector(scrollNode),\n      pathAttribute: pathAttribute,\n      headerSection: headerSection,\n      scrollEventDelay: scrollEventDelay,\n      debug: debug\n    }; // Привязка консольных методов через прокси (вывод происходит если options.debug = true)\n\n    this.attachConsoleProxy(); // Событие перехода по истории (Назад, Вперед)\n\n    this.listenEvent('popstate', this.routingHandler); // Вызов инициализации, в зависимости от статуса загрузки страницы\n\n    document.readyState === 'complete' ? this.init() : this.listenEvent('load', this.init);\n  }\n\n  _createClass(UrlScroll, [{\n    key: \"init\",\n    value: function init() {\n      // Кэширование списка секций, участвующих в смене URL\n      this.loadSectionsList(); // Запуск маршрутизации\n\n      this.routingHandler(); // Событие прокрутки на целевом узле\n\n      this.listenEvent('scroll', this.scrollEventHandler, this.options.scrollNode);\n    }\n  }, {\n    key: \"routingHandler\",\n    value: function routingHandler(event) {\n      this.console.debug('Routing start', event); // Временное отключение обработчика прокрутки (Защита от создавания лишних шагов в истории)\n\n      this.disableScrollEvent(); // Целевой путь URL\n\n      var targetPath = this.currentStateData(event).sectionPath || this.currentPath(); // Узел секции ассоцированный с целевым путем URL\n\n      var targetSectionNode = this.options.scrollNode.querySelector(\"[\".concat(this.options.pathAttribute, \"=\\\"\").concat(targetPath, \"\\\"]\")); // Прокрутка в начало целевой секции, или, в случае ее отсутствия, в начало страницы\n\n      targetSectionNode ? this.asyncThread(function () {\n        return targetSectionNode.scrollIntoView();\n      }) : this.asyncThread(function () {\n        return document.body.scrollTo(0, 0);\n      });\n      if (targetSectionNode) this.console.debug(\"Scrolled to \".concat(targetPath), targetSectionNode);\n    }\n  }, {\n    key: \"scrollEventHandler\",\n    value: function scrollEventHandler() {\n      var _this = this;\n\n      // Ограничение такта вызова обработчика события скролла\n      return debounce(function () {\n        if (_this.disabledScrollEvent) return;\n        var historyChanged = false; // Перебор всех закэшированных секций\n\n        _this.sectionsList.forEach(function (sectionNode) {\n          if (historyChanged) return; // Проверка нахождения секции в фрейме окна\n\n          if (!isScrolledIntoView(sectionNode)) return;\n          historyChanged = true; // Путь URL назаченный для текущей секции\n\n          var sectionPath = sectionNode.getAttribute(_this.options.pathAttribute); // Проверка пути URL\n\n          if (!_this.checkPath(sectionPath)) return;\n\n          _this.console.log(\"Section changed to: \".concat(sectionPath)); // Добавление шага в историю браузера и смена URL\n\n\n          return _this.changeState({\n            sectionPath: sectionPath\n          });\n        }); // Вызов обработчика Шапки, если все секции находятся за пределами фрейма окна\n\n\n        if (!historyChanged) return _this.headerState(); // Установка времени задержки для ограничения такта\n      }, this.options.scrollEventDelay)();\n    }\n  }, {\n    key: \"headerState\",\n    value: function headerState() {\n      // Проверка параметра допускающего добавление шага истории для шапки и текущего пути URL\n      if (!this.options.headerSection || !this.currentStateData().sectionPath) return false;\n      this.console.log('Changed to Header'); // Добавление шага в историю и смена URL\n\n      return this.changeState();\n    }\n  }, {\n    key: \"changeState\",\n    value: function changeState() {\n      var stateData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      try {\n        // Web History API\n        history.pushState(stateData, null, stateData.sectionPath || '/');\n      } catch (e) {\n        // Обработчик на случай срабатывания ограничения в Safari\n        this.console.error('Необходимо повысить значение задержки троттлинга (throttleDelay)', e);\n      }\n    }\n  }, {\n    key: \"asyncThread\",\n    value: function asyncThread(func) {\n      // Вызов функции в отдельном потоке\n      return setTimeout(func, 1);\n    }\n  }, {\n    key: \"checkPath\",\n    value: function checkPath(sectionPath) {\n      // TODO: Optimise conditions\n      if (history.state && history.state.sectionPath === '' && history.state.sectionPath === sectionPath) return false; // URL и значение аттрибута пустое\n\n      if (history.state && history.state.sectionPath && history.state.sectionPath === sectionPath) return false; // URL и значение аттрибута идентичны\n\n      return true;\n    }\n  }, {\n    key: \"currentStateData\",\n    value: function currentStateData(event) {\n      // Возврат данных из события или из текущего шага истории\n      return event && event.state ? event.state : history.state || {};\n    }\n  }, {\n    key: \"disableScrollEvent\",\n    value: function disableScrollEvent() {\n      var _this2 = this;\n\n      var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.scrollEventDelay * 2;\n      // Отключение обработчика события прокрутки\n      this.disabledScrollEvent = true; // Включение обработчика события прокрутки после задержки\n\n      setTimeout(function () {\n        return _this2.disabledScrollEvent = false;\n      }, delay);\n    }\n  }, {\n    key: \"currentPath\",\n    value: function currentPath() {\n      var pathname = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : location.pathname;\n      // Возврат пути URL без начального слэша\n      return pathname[0] === '/' ? pathname.substr(1) : pathname;\n    }\n  }, {\n    key: \"loadSectionsList\",\n    value: function loadSectionsList() {\n      // Выборка и кэширование списка секций, содержащих аттрибут для поиска путей\n      this.sectionsList = this.options.scrollNode.querySelectorAll(\"[\".concat(this.options.pathAttribute, \"]\"));\n      this.console.debug(\"\".concat(this.sectionsList.length, \" sections loaded\"), this.sectionsList);\n    }\n  }, {\n    key: \"listenEvent\",\n    value: function listenEvent(event, listener) {\n      var target = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window;\n      return target.addEventListener.call(target, event, listener.bind(this));\n    }\n  }, {\n    key: \"attachConsoleProxy\",\n    value: function attachConsoleProxy() {\n      var _this3 = this;\n\n      this.console = ['log', 'debug', 'error'].reduce(function (proxyObject, method) {\n        return (proxyObject[method] = function () {\n          var _console$method;\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          return _this3.options.debug ? (_console$method = console[method]).call.apply(_console$method, [console].concat(args)) : null;\n        }) && proxyObject;\n      }, {});\n    }\n  }]);\n\n  return UrlScroll;\n}();\n\nexports.default = UrlScroll;\n\nfunction isScrolledIntoView(elementNode) {\n  // Проверка попадания блока в зону видимости\n  var rect = elementNode.getBoundingClientRect();\n  var elemTop = rect.top;\n  var elemBottom = rect.bottom;\n  var halfWindowHeight = parseInt(window.innerHeight / 2); // Алгоритм подсчета можно откорректировать под себя\n\n  return elemTop <= halfWindowHeight + 1 && elemBottom >= halfWindowHeight - 1;\n}\n\nfunction debounce(func, wait) {\n  // Уменьшение тактов вызова функции\n  var timeout;\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      return func.apply(context, args);\n    }, wait);\n  };\n} // Проброс класса в глобальную область видимости\n\n\nwindow.UrlScroll = UrlScroll;\n"]}